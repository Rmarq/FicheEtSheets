doctype html
html(lang='en')
  head
    title RÃ©mi & Usha | Admin
    link(href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous")
    script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous")
    script(src='https://unpkg.com/htmx.org@2.0.1')
    link(href="static/css/welcome.css" rel="stylesheet")
  body

    div(class="accordion" id="accordionAdmin")
      div(class="accordion-item")
        h2(class="accordion-header" id="headingOne")
          button(class="accordion-button collapsed fw-bold" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne") Posts
        div(id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accordionAdmin")
          div(class="accordion-body")
            - var objectname = "post";
            form(hx-post=`/c_${objectname}` hx-swap="beforeend" hx-target=`#${objectname}s` class="mb-3")
              each m in model_post
                if m != "id"
                  input(type="text" placeholder=`${m}` name=`${m}` class="form-control mb-3")
              button(type="submit" class="btn btn-primary") Add
            table(class="table table-striped table-hover")
              thead
                tr
                  each m in model_post
                    th= m
              tbody(id=`${objectname}s` hx-target="closest tr" hx-swap="outerHTML swap:0.5s")
                each obj in posts
                  tr
                    each m in model_post
                      td= obj[m]
                    td
                      button(class="btn btn-primary" hx-get=`/e_${objectname}/${obj.id}`)= "Edit " + objectname
                    td
                      button(class="btn btn-primary" hx-delete=`/d_${objectname}/${obj.id}`) Delete

      div(class="accordion-item")
        h2(class="accordion-header" id="headingTwo")
          button(class="accordion-button collapsed fw-bold" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo") Questions
        div(id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionAdmin")
          div(class="accordion-body")
            - var objectname = "question";
            form(hx-post=`/c_${objectname}` hx-swap="beforeend" hx-target=`#${objectname}s` class="mb-3")
              each m in model_question
                if m != "id"
                  input(type="text" placeholder=`${m}` name=`${m}` class="form-control mb-3")
              button(type="submit" class="btn btn-primary") Add
            table(class="table table-striped table-hover")
              thead
                tr
                  each m in model_question
                    th= m
              tbody(id=`${objectname}s` hx-target="closest tr" hx-swap="outerHTML swap:0.5s")
                each obj in questions
                  tr
                    each m in model_question
                      td= obj[m]
                    td
                      button(class="btn btn-primary" hx-get=`/e_${objectname}/${obj.id}`)= "Edit " + objectname
                    td
                      button(class="btn btn-primary" hx-delete=`/d_${objectname}/${obj.id}`) Delete

      div(class="accordion-item")
        h2(class="accordion-header" id="headingThree")
          button(class="accordion-button collapsed fw-bold" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree") Persons
        div(id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionAdmin")
          div(class="accordion-body")
            - var objectname = "person";
            form(hx-post=`/c_${objectname}` hx-swap="beforeend" hx-target=`#${objectname}s` class="mb-3")
              each m in model_person
                if m != "id" && m != "family"
                  input(type="text" placeholder=`${m}` name=`${m}` class="form-control mb-3")
              select(class="form-select" name="family" aria-label="Default select example" id="selfam")
                option(value="(NEW)" selected) New family
                each fam in families
                  option(value=`${fam}`)= fam
              button(type="button" class="btn btn-info floatright" hx-get="/refresh_select" hx-target="#selfam" hx-swap="outerHTML") Refresh
                svg(xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 2 48 48")
                  path(d="M35.3 12.7c-2.89-2.9-6.88-4.7-11.3-4.7-8.84 0-15.98 7.16-15.98 16s7.14 16 15.98 16c7.45 0 13.69-5.1 15.46-12h-4.16c-1.65 4.66-6.07 8-11.3 8-6.63 0-12-5.37-12-12s5.37-12 12-12c3.31 0 6.28 1.38 8.45 3.55l-6.45 6.45h14v-14l-4.7 4.7z")
                  path(d="M0 0h48v48h-48z" fill="none")

              button(type="submit" class="btn btn-primary" ) Add
            table(class="table table-striped table-hover")
              thead
                tr
                  each m in model_person
                    th= m
              tbody(id=`${objectname}s` hx-target="closest tr" hx-swap="outerHTML swap:0.5s")
                each obj in persons
                  tr
                    each m in model_person
                      td= obj[m]
                    td
                      button(class="btn btn-primary" hx-get=`/e_${objectname}/${obj.id}`)= "Edit " + objectname
                    td
                      button(class="btn btn-primary" hx-delete=`/d_${objectname}/${obj.id}`) Delete

      div(class="accordion-item")
        h2(class="accordion-header" id="headingFour")
          button(class="accordion-button collapsed fw-bold" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour") Answers
        div(id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#accordionAdmin")
          div(class="accordion-body")
            - var objectname = "answer";
            form(hx-post=`/c_${objectname}` hx-swap="beforeend" hx-target=`#${objectname}s` class="mb-3")
              each m in model_answer
                if m != "id"
                  input(type="text" placeholder=`${m}` name=`${m}` class="form-control mb-3")
              button(type="submit" class="btn btn-primary") Add
            table(class="table table-striped table-hover")
              thead
                tr
                  each m in model_answer
                    th= m
              tbody(id=`${objectname}s` hx-target="closest tr" hx-swap="outerHTML swap:0.5s")
                each obj in answers
                  tr
                    each m in model_answer
                      td= obj[m]
                    td
                      button(class="btn btn-primary" hx-get=`/e_${objectname}/${obj.id}`)= "Edit " + objectname
                    td
                      button(class="btn btn-primary" hx-delete=`/d_${objectname}/${obj.id}`) Delete