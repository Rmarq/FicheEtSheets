doctype html
html(lang='en')
    head
        title Oh My Boxes
        link(rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css')
        link(rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css')
        link(rel="stylesheet" href="/static/css/fiches.css")
        script(src='https://unpkg.com/htmx.org@2.0.1')
        script(src='/static/js/dragdrop.js') // Include drag-and-drop script
    body
        div(class="container")
            .header-body
                .header-title
                    h1= current ? current.toJSON().title : "Oh My Boxes"
                    if current
                        a(href="/fiches/"+current.toJSON().parentId, class="btn btn-primary button-icon")
                            i(class="bi bi-arrow-left")
                if childBoxes.length > 0
                    ul(class="box-list")
                        each box in childBoxes
                            a(href="/fiches/"+box.toJSON().id, class="box-link box-drag" draggable="true" data-box-id=box.toJSON().id)
                                li(class="box-item")
                                    h2= box.toJSON().title
                                    p= box.toJSON().details
                else
                    p No child boxes found.
                if childFiches && childFiches.length > 0
                    ul(class="box-list")
                        each fiche in childFiches
                            a(href="/fiche/"+fiche.toJSON().id, class="box-link")
                                li(class="box-item")
                                    h2= fiche.toJSON().title
                                    p= fiche.toJSON().lastDone